# P8.07 - "Generate with ARIA" Wizard Implementation

## Overview
Successfully implemented the ARIA Generate Wizard feature that allows users to create AI-generated training programs through a step-by-step wizard interface.

## Files Created/Modified

### New Files
1. **`src/lib/api/aria-program.ts`** - API function for calling the ARIA generate program edge function
2. **`src/components/training-plan/AriaGenerateWizard.tsx`** - Complete wizard component with 4 steps

### Modified Files
1. **`src/components/training-plan/ProgramsTab.tsx`** - Added "Generate with AI" button and integrated the wizard

## Features Implemented

### âœ… Wizard Steps
1. **Goals Selection** - Multi-select checkboxes for training goals (strength, muscle, endurance, power, fat loss, general fitness, sport-specific, rehabilitation)
2. **Schedule Configuration** - Available training days selection and program duration (4-16 weeks)
3. **Equipment Selection** - Multi-select equipment options (barbell, dumbbells, kettlebells, resistance bands, etc.)
4. **Preview & Confirmation** - Shows formatted prompt that will be sent to ARIA

### âœ… User Interface
- **Mobile Responsive** - Full-height stepper with scrollable content
- **Gradient Design** - Purple/pink gradient matching app theme
- **Navigation** - Previous/Next buttons with validation
- **Loading States** - Spinner during program generation
- **Toast Notifications** - Success/error feedback

### âœ… Integration
- **"Generate with AI" Button** - Positioned beside "Create Program" button with sparkles icon
- **Edge Function Integration** - Calls existing `aria-generate-program` edge function
- **Error Handling** - Graceful error handling with user feedback
- **Type Safety** - Full TypeScript support

## Technical Details

### API Integration
```typescript
// Calls the existing supabase edge function
await supabase.functions.invoke('aria-generate-program', {
  body: {
    athlete_uuid: user.id,
    coach_uuid: user.id,
    goal: generatePrompt(),
    weeks: state.weeks,
    available_days: state.availableDays,
    equipment: state.equipment
  },
});
```

### Wizard Flow
1. User clicks "Generate with AI" button
2. 4-step wizard opens with stepper navigation
3. User selects goals, schedule, and equipment
4. Preview shows formatted prompt
5. On confirmation, API call is made to ARIA
6. Success redirects to program builder (TODO: load generated template)

### Mobile Optimization
- Responsive grid layouts (1 column on mobile, 2 on desktop)
- Full-height dialog with scrollable content
- Touch-friendly buttons and checkboxes
- Optimized spacing for mobile screens

## Current Status

### âœ… Completed
- [x] "Generate with AI" button added to ProgramsTab
- [x] Complete 4-step wizard with validation
- [x] Mobile-responsive design
- [x] API integration with existing edge function
- [x] Error handling and loading states
- [x] TypeScript support
- [x] Build passes without errors

### ðŸ”„ TODO (for future implementation)
- [ ] Redirect to ProgramBuilder with loaded generated template
- [ ] Template loading from generated template_id
- [ ] Session generation integration (cur4.01)

## Usage
1. Navigate to Training Plan > Programs tab
2. Click "Generate with AI" button (visible for coaches)
3. Complete the 4-step wizard:
   - Select training goals
   - Choose available days and duration
   - Select equipment
   - Review and confirm
4. ARIA generates the program and returns template_id

## Dependencies
- Uses existing UI components (Button, Dialog, Stepper, Checkbox, etc.)
- Integrates with existing supabase client
- Compatible with existing toast notification system
- No new external dependencies added

The implementation is production-ready and fully functional, with only the ProgramBuilder integration remaining for the complete user flow.