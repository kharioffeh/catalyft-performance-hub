# Project-wide Gradle settings for CI/CD optimized build

# Memory settings - Reduced for CI environment
org.gradle.jvmargs=-Xmx1024m -XX:MaxMetaspaceSize=256m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8

# Disable parallel to prevent race conditions
org.gradle.parallel=false
org.gradle.workers.max=1
org.gradle.daemon=false

# AndroidX
android.useAndroidX=true
android.enableJetifier=true

# Build only x86_64 for CI (fastest)
reactNativeArchitectures=x86_64

# CRITICAL: Disable new architecture - major cause of slow builds
newArchEnabled=false

# Hermes
hermesEnabled=false

# Disable all optional features
expo.gif.enabled=false
expo.webp.enabled=false
expo.webp.animated=false
expo.useLegacyPackaging=false
expo.edgeToEdgeEnabled=false
EX_DEV_CLIENT_NETWORK_INSPECTOR=false

# Android SDK versions
android.compileSdkVersion=34
android.targetSdkVersion=34
android.buildToolsVersion=34.0.0

# Packaging options
android.packagingOptions.pickFirsts=**/libc++_shared.so,**/libjsc.so,**/libhermes.so
android.packagingOptions.excludes=META-INF/DEPENDENCIES

# Aggressive CI optimizations
org.gradle.caching=false
org.gradle.configureondemand=false
android.enableBuildCache=false
android.enableProfileCsvWriter=false
kotlin.incremental=false

# Disable all non-essential features
android.enablePngCrunchInReleaseBuilds=false
android.enableR8.fullMode=false
android.enableD8.desugaring=false
android.enableProguardInReleaseBuilds=false
android.enableShrinkResourcesInReleaseBuilds=false

# Skip unnecessary tasks
android.bundle.enableUncompressedNativeLibs=false
android.buildFeatures.buildConfig=false
android.buildFeatures.aidl=false
android.buildFeatures.renderScript=false

# Network timeouts
systemProp.http.connectionTimeout=60000
systemProp.http.socketTimeout=60000
systemProp.https.connectionTimeout=60000
systemProp.https.socketTimeout=60000

# Disable lint
android.lintOptions.abortOnError=false
android.lintOptions.checkReleaseBuilds=false