# Micro Gradle configuration - Absolute minimum memory
# For severely memory-constrained CI environments

# Minimal memory allocation - let the system decide
org.gradle.jvmargs=-Xmx4096m -XX:MaxMetaspaceSize=1024m -XX:+UseG1GC -Dkotlin.compiler.execution.strategy=in-process -XX:+UseStringDeduplication

# Disable everything that uses memory
org.gradle.parallel=false
org.gradle.daemon=false
org.gradle.configureondemand=false
org.gradle.caching=false

# Kotlin settings - most conservative
kotlin.compiler.execution.strategy=in-process
kotlin.incremental=false
kotlin.incremental.useClasspathSnapshot=false
kotlin.incremental.android=false

# Android settings - minimal
android.useAndroidX=true
android.enableJetifier=true

# Single architecture only
reactNativeArchitectures=arm64-v8a

# Disable ALL unnecessary features
android.enablePngCrunchInReleaseBuilds=false
android.enableShrinkResourcesInReleaseBuilds=false
expo.gif.enabled=false
expo.webp.enabled=false
expo.webp.animated=false
EX_DEV_CLIENT_NETWORK_INSPECTOR=false

# Use Expo-compatible Kotlin version
kotlin.version=1.7.10
kotlin.compiler.version=1.7.10
kotlin.stdlib.version=1.7.10
android.kotlinVersion=1.7.10

# Android build settings - minimal
android.minSdkVersion=23
android.compileSdkVersion=34
android.targetSdkVersion=34
android.buildToolsVersion=34.0.0

# Disable new architecture
newArchEnabled=false
hermesEnabled=true

# Disable R8 full mode to save memory
android.enableR8.fullMode=false
android.enableD8.desugaring=false

# Additional memory optimizations
android.enableProguardInReleaseBuilds=false
android.enableR8=false
android.enableD8=false